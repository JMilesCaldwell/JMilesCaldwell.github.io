<!--
========================================
PASSWORD PROTECTION OVERLAY - REUSABLE COMPONENT
========================================
This is a complete password protection system that reads from an external configuration file.
To use this on any page, copy the sections below into the appropriate places.
========================================
-->

<!--
STEP 1: Add this to your <head> section
Include the Inter font for styling
-->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<!--
STEP 2: Add this CSS to your <style> section
-->
<style>
    .password-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }
    .password-container {
        text-align: center;
    }
    .construction-prompt {
        font-size: 1.5rem;
        font-weight: 300;
        color: #A9A9A9;
        margin-bottom: 2rem;
        animation: fadeInOut 3s ease-in-out infinite;
    }
    @keyframes fadeInOut {
        0%, 100% {
            opacity: 0.3;
        }
        50% {
            opacity: 1;
        }
    }
    .password-container input {
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
        border: none;
        border-bottom: 2px solid #D3D3D3;
        background: transparent;
        color: #708090;
        outline: none;
        text-align: center;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-weight: 300;
        letter-spacing: 0.5px;
        transition: border-color 0.3s ease;
        width: 250px;
    }
    .password-container input:focus {
        border-bottom-color: #708090;
    }
    .password-container input::placeholder {
        color: #D3D3D3;
    }
    .password-error {
        color: #CD5C5C;
        margin-top: 1rem;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 0.9rem;
        font-weight: 300;
        display: none;
    }
</style>

<!--
STEP 3: Add this HTML to your <body> section (preferably at the top)
-->
<div id="password-overlay" class="password-overlay">
    <div class="password-container">
        <p class="construction-prompt">//under construction</p>
        <input type="password" id="password-input" placeholder="enter access code" autocomplete="off">
        <div class="password-error" id="password-error">access denied</div>
    </div>
</div>

<!--
STEP 4: Add this JavaScript to your <script> section
Make sure to update the fetch path to point to your passwords.md file
-->
<script>
    // ========================================
    // PASSWORD PROTECTION
    // Config file: imogen/resources/passwords.md
    // ========================================
    const passwordInput = document.getElementById('password-input');
    const passwordOverlay = document.getElementById('password-overlay');
    const passwordError = document.getElementById('password-error');

    let passwordProtectionEnabled = false;
    let correctPassword = '';

    // Fetch password configuration from external file
    // UPDATE THIS PATH to match your passwords.md location
    fetch('resources/passwords.md')
        .then(response => response.text())
        .then(data => {
            // Parse the markdown file
            const passwordMatch = data.match(/\*\*Password\*\*:\s*(.+)/);
            const enabledMatch = data.match(/\*\*Enabled\*\*:\s*([YN])/);

            if (passwordMatch) {
                correctPassword = passwordMatch[1].trim();
            }

            if (enabledMatch) {
                passwordProtectionEnabled = enabledMatch[1] === 'Y';
            }

            // Hide overlay if password protection is disabled
            if (!passwordProtectionEnabled) {
                passwordOverlay.style.display = 'none';
            }
        })
        .catch(error => {
            console.error('Error loading password config:', error);
            // Default to disabled if file can't be loaded
            passwordOverlay.style.display = 'none';
        });

    passwordInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            if (passwordInput.value === correctPassword) {
                passwordOverlay.style.display = 'none';
            } else {
                passwordError.style.display = 'block';
                passwordInput.value = '';
                setTimeout(() => {
                    passwordError.style.display = 'none';
                }, 2000);
            }
        }
    });
</script>

<!--
========================================
STEP 5: Create passwords.md configuration file
========================================
Create a file at the path specified in the fetch() call above with this format:

# Password Configuration

## Your Page Name
- **Password**: YourPasswordHere
- **Enabled**: N

---

## Instructions
- To change the password, edit the password value above
- To enable/disable, change the Enabled value to Y or N
- Format: Do not change the structure, only edit values after the colons

========================================
USAGE NOTES:
========================================
1. Copy the CSS, HTML, and JavaScript sections into your page
2. Update the fetch() path to point to your passwords.md file
3. Create or update the passwords.md file with your password and settings
4. To enable: Change Enabled to Y in passwords.md
5. To disable: Change Enabled to N in passwords.md
6. To change password: Edit the Password value in passwords.md

The overlay will display until the correct password is entered.
It uses the lab-style "under construction" aesthetic.
-->
