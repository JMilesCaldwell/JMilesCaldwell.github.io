<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rastaman Jan</title>
    <link rel="icon" type="image/png" href="resources/rasticon.png">
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: #000;
        }
        img {
            max-width: 90%;
            height: auto;
        }
        .audio-container {
            margin-top: 20px;
            width: 90%;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            backdrop-filter: blur(10px);
            transition: background 0.3s ease;
        }
        .audio-container.playing {
            background: rgba(29, 185, 84, 0.1);
        }
        .song-title {
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 10px;
            text-align: left;
            overflow: hidden;
            white-space: nowrap;
        }
        .song-title.scrolling {
            position: relative;
        }
        .song-title.scrolling::after {
            content: attr(data-title);
            position: absolute;
            left: 0;
            top: 0;
            animation: scroll-title 10s linear infinite;
            padding-left: 100%;
        }
        @keyframes scroll-title {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        audio {
            width: 100%;
        }
        .download-album-btn {
            background: #1db954;
            color: #fff;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
            transition: background 0.3s ease;
            margin-top: 30px;
            cursor: pointer;
            border: none;
        }
        .download-album-btn:hover {
            background: #1ed760;
        }
        .password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .password-container {
            text-align: center;
        }
        .password-container h2 {
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin-bottom: 20px;
        }
        .password-container input {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #1db954;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            outline: none;
            text-align: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .password-container input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .password-error {
            color: #ff4444;
            margin-top: 10px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            display: none;
        }
    </style>
</head>
<body>
    <div id="password-overlay" class="password-overlay">
        <div class="password-container">
            <h2>Enter Password</h2>
            <input type="password" id="password-input" placeholder="Password" autocomplete="off">
            <div class="password-error" id="password-error">Incorrect password</div>
        </div>
    </div>
    <img src="resources/RastamanJan.png" alt="Rastaman Jan">
    <div id="audio-players"></div>
    <button class="download-album-btn" onclick="downloadAlbum()">Download Album</button>

    <script>
        // Password protection
        const correctPassword = "Horseman35";
        const passwordInput = document.getElementById('password-input');
        const passwordOverlay = document.getElementById('password-overlay');
        const passwordError = document.getElementById('password-error');

        passwordInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (passwordInput.value === correctPassword) {
                    passwordOverlay.style.display = 'none';
                } else {
                    passwordError.style.display = 'block';
                    passwordInput.value = '';
                    setTimeout(() => {
                        passwordError.style.display = 'none';
                    }, 2000);
                }
            }
        });

        // Track list - update this when adding new songs
        const tracks = [
            { title: 'Dharmaman Jan (dub version)', file: 'Rastaman Jan - Dharmaman Jan (dub version).mp3' },
            { title: 'CEO of Everything', file: 'Rastaman Jan - CEO of Everything.mp3' },
            { title: 'One Love Regulation', file: 'Rastaman Jan - One Love Regulation.mp3' },
            { title: 'When di Buddhaman Come (ft. Budaboi)', file: 'Rastaman Jan ft. Budaboi - When di Buddhaman Come.mp3' },
            { title: 'Jan Love', file: 'Rastaman Jan - Jan Love.mp3' },
            { title: '35 Years', file: 'Rastaman Jan - 35 Years.mp3' }
        ];

        // Generate audio players from track list
        const container = document.getElementById('audio-players');
        tracks.forEach((track, index) => {
            const div = document.createElement('div');
            div.className = 'audio-container';
            div.innerHTML = `
                <div class="song-title" data-title="${track.title}">${track.title}</div>
                <audio controls controlsList="nodownload" data-index="${index}">
                    <source src="resources/${track.file}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            `;
            container.appendChild(div);
        });

        // Get all audio elements
        const audioElements = document.querySelectorAll('audio');
        let userPaused = false;

        // Ensure only one track plays at a time and handle cycling
        audioElements.forEach((audio, index) => {
            // When a track starts playing
            audio.addEventListener('play', () => {
                userPaused = false;

                // Pause other tracks
                audioElements.forEach(otherAudio => {
                    if (otherAudio !== audio) {
                        otherAudio.pause();
                    }
                });

                // Update UI - add scrolling to current, remove from others
                document.querySelectorAll('.audio-container').forEach(container => {
                    container.classList.remove('playing');
                    container.querySelector('.song-title').classList.remove('scrolling');
                });

                audio.parentElement.classList.add('playing');
                audio.parentElement.querySelector('.song-title').classList.add('scrolling');
            });

            // When a track is paused by user
            audio.addEventListener('pause', () => {
                // Only set userPaused if the audio wasn't ended (to allow auto-cycling)
                if (!audio.ended) {
                    userPaused = true;
                }
                audio.parentElement.classList.remove('playing');
                audio.parentElement.querySelector('.song-title').classList.remove('scrolling');
            });

            // When a track ends, play the next one
            audio.addEventListener('ended', () => {
                if (!userPaused) {
                    const nextIndex = (index + 1) % audioElements.length;
                    audioElements[nextIndex].play();
                }
            });
        });

        // Download all tracks
        function downloadAlbum() {
            tracks.forEach((track, index) => {
                setTimeout(() => {
                    const link = document.createElement('a');
                    link.href = `resources/${track.file}`;
                    link.download = track.file;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }, index * 300); // Stagger downloads to avoid browser blocking
            });
        }
    </script>
</body>
</html>
