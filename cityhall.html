<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>-TUSK-</title>
  <link 
    href="https://fonts.googleapis.com/css2?family=Almendra&family=Cinzel:wght@400;700&display=swap" 
    rel="stylesheet"
  >
  <style>
    /* General Page Styling */
    body {
      margin: 0;
      background: url('resources/cityhall.png') no-repeat center center fixed;
      background-size: cover;
      color: #FAF4E0;
      font-family: 'Almendra', serif;
      text-align: center;
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 10px;
    }

    h1, h2 {
      font-family: 'Cinzel', serif;
    }

    .faction-section {
      margin-bottom: 2rem;
      border: 2px solid #660000;
      border-radius: 8px;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.1);
    }

    .faction-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 1rem;
    }

    /* Vertical Banner (fixed width or fixed height, pick your preference) */
    .faction-banner {
      width: 120px;  /* example fixed width */
      height: auto;  /* banner remains vertical */
      border: 2px solid #8B0000;
      border-radius: 4px;
      margin-bottom: 1rem;
    }

    .faction-portrait {
      max-width: 150px;
      border: 2px solid #8B0000;
      border-radius: 8px;
      margin: 0.5rem;
    }

    .faction-content {
      text-align: left;
      margin: 0.5rem 1rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }

    th, td {
      border: 1px solid #8B0000;
      padding: 0.5rem;
      text-align: center;
    }

    th {
      background: #8B0000;
      color: #FAF4E0;
      font-family: 'Cinzel', serif;
    }

    .divider {
      margin: 1rem auto;
      font-size: 1.5rem;
    }
    .divider::after {
      content: "✦ ✧ ✦";
      color: #8B0000;
      letter-spacing: 0.5rem;
    }

    /* Button Styling */
    .bribe-button, .audience-button, .home-button {
      background: #8B0000;
      color: #FAF4E0;
      border: 1px solid #660000;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      margin: 0.2rem;
    }
    .bribe-button:hover, .audience-button:hover, .home-button:hover {
      background: #660000;
    }

    /* Modal Styling */
    #bribeModal {
      display: none; /* hidden by default */
      position: fixed; 
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.8); /* black overlay */
    }
    .modal-content {
      background-color: #2a2a2a;
      margin: 10% auto;
      padding: 1rem;
      border: 2px solid #660000;
      max-width: 500px;
      border-radius: 10px;
      position: relative;
      text-align: left;
    }
    .close-button {
      background: #8B0000;
      border: 1px solid #660000;
      color: #FAF4E0;
      padding: 0.3rem 0.6rem;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      position: absolute;
      top: 1rem;
      right: 1rem;
      border-radius: 4px;
    }
    .close-button:hover {
      background: #660000;
    }
    .modal-content label {
      display: block;
      margin-bottom: 0.5rem;
      font-family: 'Cinzel', serif;
    }
    .modal-content input {
      width: 100%;
      padding: 0.4rem;
      margin-bottom: 0.8rem;
      box-sizing: border-box;
      font-family: 'Almendra', serif;
    }
    .submit-bribe-button {
      display: inline-block;
      margin-top: 0.5rem;
    }

    @media (max-width: 600px) {
      table {
        font-size: 0.9rem;
      }
      th, td {
        padding: 0.3rem;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Political Overview</h1>
    <p>Welcome, traveller, to the ever-shifting tapestry of power that is the Evershroud Isles.</p>

    <div class="divider"></div>

    <!-- Hegemony of Silt -->
    <div class="faction-section">
      <div class="faction-header">
        <!-- Vertical Banner -->
        <img 
          src="resources/hegemony_of_silt_banner.png" 
          alt="Hegemony of Silt Banner Placeholder" 
          class="faction-banner"
        >
        <!-- Portrait -->
        <img 
          src="resources/hegemony_of_silt_portrait.png" 
          alt="Hegemony of Silt Portrait Placeholder" 
          class="faction-portrait"
        >
        <h2>Hegemony of Silt</h2>
      </div>
      <div class="faction-content">
        <p><strong>Government & Power:</strong> Theocratic-oligarchic regime under the Cult of Rael.</p>
        <p><strong>Economy:</strong> Claims self-sufficiency; supports costly mercenary armies.</p>
        <p><strong>Culture & Religion:</strong> Rael’s doctrine of justice and war underpins all civic life.</p>
      </div>

      <h3>Key Representatives</h3>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>High Pentarch Ravella</td>
            <td>Religious Leader</td>
            <td>
              <button class="bribe-button" onclick="openBribeModal('siltRavella')">Bribe</button>
              <button class="audience-button" onclick="attemptAudience('siltRavella')">Request Audience</button>
            </td>
          </tr>
          <tr>
            <td>Chairman Harren of Silt</td>
            <td>Mercantile Head</td>
            <td>
              <button class="bribe-button" onclick="openBribeModal('siltHarren')">Bribe</button>
              <button class="audience-button" onclick="attemptAudience('siltHarren')">Request Audience</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Example Additional Faction: Azurean League (repeat pattern) -->
    <div class="faction-section">
      <div class="faction-header">
        <img 
          src="resources/azurean_league_banner.png" 
          alt="Azurean League Banner Placeholder" 
          class="faction-banner"
        >
        <img 
          src="resources/azurean_league_portrait.png" 
          alt="Azurean League Portrait Placeholder" 
          class="faction-portrait"
        >
        <h2>The Azurean League</h2>
      </div>
      <div class="faction-content">
        <p><strong>Government & Power:</strong> Loose federation of lords; led by the Prince of Azure.</p>
        <p><strong>Economy:</strong> Notable maritime trade hub; mines and craftsmanship flourish.</p>
        <p><strong>Culture & Religion:</strong> Diverse traditions; Origen Brotherhood highly respected.</p>
      </div>

      <h3>Key Representatives</h3>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Prince Helias of Azure</td>
            <td>Federation Leader</td>
            <td>
              <button class="bribe-button" onclick="openBribeModal('azureHelias')">Bribe</button>
              <button class="audience-button" onclick="attemptAudience('azureHelias')">Request Audience</button>
            </td>
          </tr>
          <tr>
            <td>Lord Elandor Silversong</td>
            <td>Trade Counsellor</td>
            <td>
              <button class="bribe-button" onclick="openBribeModal('azureElandor')">Bribe</button>
              <button class="audience-button" onclick="attemptAudience('azureElandor')">Request Audience</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Repeat for other factions as needed... -->

    <!-- HOME BUTTON AT THE BOTTOM -->
    <a href="#" class="home-button">Home</a>
  </div>

  <!-- Bribe Modal -->
  <div id="bribeModal">
    <div class="modal-content">
      <button class="close-button" onclick="closeBribeModal()">Close</button>
      <h2 id="bribeTitle"></h2>
      <p id="bribeDialogue">"What is it you wish to offer?"</p>

      <label for="bribeAmount">Bribe Amount (GP):</label>
      <input type="number" id="bribeAmount" min="0" value="0" />
      <button class="submit-bribe-button" onclick="submitBribe()">Offer Bribe</button>
      
      <p id="bribeResult"></p>
    </div>
  </div>

  <script>
    /************************
     *   REPRESENTATIVE DATA
     ************************/
    /*
      For each representative, define:
      - name: Display name
      - minBribe & maxBribe: random threshold range
      - bribeSuccessChance: If the player's bribe >= randomThreshold,
         there is still a chance to fail (0.0 -> 1.0).
      - audienceChance: chance to grant an audience if requested
      - favorLines: array of random "favours" if the bribe is successful
    */
    const REP_DATA = {
      siltRavella: {
        name: "High Pentarch Ravella",
        minBribe: 50,
        maxBribe: 200,
        bribeSuccessChance: 0.75,   // 75% success if above threshold
        audienceChance: 0.25,       // 25% chance for an audience
        favorLines: [
          "A subtle blessing to conceal your deeds from Rael’s most watchful inquisitors.",
          "An indulgence that absolves you of minor heresies—until next time.",
          "Some quiet instructions to the temple guard to look the other way."
        ]
      },
      siltHarren: {
        name: "Chairman Harren of Silt",
        minBribe: 30,
        maxBribe: 150,
        bribeSuccessChance: 0.80,
        audienceChance: 0.33,
        favorLines: [
          "A sweet tariff reduction on your next shipment of questionable goods.",
          "A discreet trade licence that bypasses local port authorities.",
          "Renegotiating a minor contract to divert mercenaries in your favour."
        ]
      },
      azureHelias: {
        name: "Prince Helias of Azure",
        minBribe: 60,
        maxBribe: 180,
        bribeSuccessChance: 0.70,
        audienceChance: 0.40,
        favorLines: [
          "Diplomatic immunity for a fortnight in Azure’s harbours.",
          "Introductions to Azure’s most influential lords at the next court gala.",
          "A short, very private audience with one of the Prince’s top advisors."
        ]
      },
      azureElandor: {
        name: "Lord Elandor Silversong",
        minBribe: 20,
        maxBribe: 100,
        bribeSuccessChance: 0.85,
        audienceChance: 0.33,
        favorLines: [
          "A hush-hush inclusion in the next major copper trade deal.",
          "Permitting some 'accounting errors' in your cargo logs—no questions asked.",
          "A promise to handle those 'export taxes' in a more creative manner."
        ]
      }
      // Add additional entries for each representative across all factions
    };

    /************************
     *   BRIBE MODAL LOGIC
     ************************/
    let currentRepKey = null; // Track which rep's modal is open

    function openBribeModal(repKey) {
      currentRepKey = repKey;
      const repInfo = REP_DATA[repKey];
      document.getElementById("bribeTitle").textContent = repInfo.name;
      document.getElementById("bribeResult").textContent = "";
      document.getElementById("bribeAmount").value = 0;
      document.getElementById("bribeModal").style.display = "block";
    }

    function closeBribeModal() {
      document.getElementById("bribeModal").style.display = "none";
    }

    // Submit the bribe, check thresholds
    function submitBribe() {
      const repInfo = REP_DATA[currentRepKey];
      const bribeValue = parseInt(document.getElementById("bribeAmount").value, 10) || 0;
      const bribeResult = document.getElementById("bribeResult");

      // Random threshold in [minBribe, maxBribe]
      const threshold = getRandomInt(repInfo.minBribe, repInfo.maxBribe);

      if (bribeValue < threshold) {
        bribeResult.textContent = `Your offer is too low. ${repInfo.name} scoffs and dismisses you. (Threshold was somewhere between ${repInfo.minBribe} & ${repInfo.maxBribe}.)`;
        return;
      }

      // We made the threshold; now there's a chance to succeed
      const randomRoll = Math.random(); // 0 to 1
      if (randomRoll <= repInfo.bribeSuccessChance) {
        // success
        const randomFavor = pickRandomLine(repInfo.favorLines);
        bribeResult.textContent = `Success! ${repInfo.name} accepts your bribe. Favour granted: ${randomFavor}`;
      } else {
        // fail
        bribeResult.textContent = `${repInfo.name} pockets your coin but offers only an icy stare. No favours for you.`;
      }
    }

    /************************
     *   AUDIENCE LOGIC
     ************************/
    function attemptAudience(repKey) {
      const repInfo = REP_DATA[repKey];
      const randomRoll = Math.random(); // 0 to 1
      if (randomRoll <= repInfo.audienceChance) {
        alert(`${repInfo.name} grants you an audience!`);
      } else {
        alert(`${repInfo.name} denies your request. No audience today.`);
      }
    }

    /************************
     *   UTILITY FUNCTIONS
     ************************/
    function getRandomInt(min, max) {
      // inclusive of both min and max
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function pickRandomLine(array) {
      const idx = Math.floor(Math.random() * array.length);
      return array[idx];
    }
  </script>
</body>
</html>
