<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shrine to Mazd Gildan</title>
  <link rel="icon" href="/resources/compass_favicon_32x32.png" type="image/png" />
  <link 
    href="https://fonts.googleapis.com/css2?family=Almendra&family=Cinzel:wght@400;700&display=swap" 
    rel="stylesheet"
  />
  <style>
    body {
      margin: 0;
      background: url('resources/catacombs.png') no-repeat center center fixed;
      background-size: cover;
      color: #FAF4E0;
      font-family: 'Almendra', serif;
      text-align: center;
    }

    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: rgba(0, 0, 0, 0.7);
      padding: 2rem;
      border-radius: 10px;
    }

    h1, h2, h3 {
      font-family: 'Cinzel', serif;
      margin: 0.5rem 0;
    }

    .god-image {
      display: block;
      margin: 0 auto 1rem;
      width: 150px;
      border: 2px solid #8B0000;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
    }

    /* Donation section */
    .donation-section {
      margin: 1.5rem 0;
    }
    .donation-section label {
      margin-right: 0.5rem;
    }
    .donation-section input[type="number"] {
      width: 6rem;
      padding: 0.3rem;
      font-family: 'Cinzel', serif;
      text-align: center;
    }
    .donation-section button {
      background-color: #8B0000;
      color: #FAF4E0;
      border: none;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 1rem;
      font-family: 'Cinzel', serif;
      margin-left: 0.5rem;
    }
    .donation-section button:hover {
      background-color: #660000;
    }

    /* Blessing display */
    #blessing-result {
      margin-top: 2rem;
      min-height: 100px;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 10px;
      border: 2px solid #8B0000;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: left;
    }
    #blessing-result h2 {
      margin-bottom: 1rem;
    }

    /* Help button & modal */
    .help-button {
      display: inline-block;
      margin: 1rem;
      padding: 0.5rem 1rem;
      font-family: 'Cinzel', serif;
      font-size: 1rem;
      background-color: #8B0000;
      color: #FAF4E0;
      border: 2px solid #660000;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
    }
    .help-button:hover {
      background-color: #660000;
    }

    .modal-overlay {
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
    }
    .modal {
      background: rgba(40, 40, 40, 0.95);
      padding: 2rem;
      border-radius: 10px;
      max-width: 700px;
      max-height: 80vh;
      overflow-y: auto;
    }
    .modal h2 {
      font-family: 'Cinzel', serif;
      margin-bottom: 1rem;
    }
    .close-modal {
      float: right;
      background: #8B0000;
      border: none;
      color: #FAF4E0;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      margin-top: -1rem;
      margin-right: -1rem;
      border-radius: 5px;
      transition: background 0.3s ease;
    }
    .close-modal:hover {
      background: #660000;
    }

    /* Home Button Styling */
    .home-button {
      display: inline-block;
      margin: 2rem 0;
      padding: 0.5rem 1rem;
      font-size: 1.2rem;
      font-family: 'Cinzel', serif;
      color: #FAF4E0;
      background: #8B0000;
      text-decoration: none;
      border-radius: 5px;
      border: 2px solid #660000;
      letter-spacing: 0.1rem;
      transition: background 0.3s ease;
    }
    .home-button:hover {
      background: #660000;
      border-color: #8B0000;
      color: #FAF4E0;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #666;
      font-family: 'Almendra', serif;
    }

    /* Arrow links (left & right) */
    .arrow-links {
      position: fixed;
      bottom: 1rem;
      width: 100%;
      display: flex;
      justify-content: space-between;
      pointer-events: none;
    }
    .arrow-link {
      pointer-events: auto;
      text-decoration: none;
      font-size: 2rem;
      color: #FAF4E0;
      background: #8B0000;
      padding: 0.3rem 0.8rem;
      border: 2px solid #660000;
      border-radius: 50%;
      margin: 0 1rem;
      transition: background 0.3s ease;
    }
    .arrow-link:hover {
      background: #660000;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Shrine to Mazd Gildan</h1>
  <p>Within these catacombs, secrets of Mazd Gildan are said to stir the depths of mortal desire.</p>

  <img class="god-image" src="resources/mazd-gildan.png" alt="Mazd Gildan">

  <!-- Donation section -->
  <div class="donation-section">
    <label for="donation-input">Donate GP:</label>
    <input type="number" id="donation-input" min="0" step="1" value="0">
    <button id="donate-button">Make an Offering</button>
    <button class="help-button" id="help-button">Help</button>
  </div>

  <!-- Blessing result -->
  <div id="blessing-result">
    <p><em>Step softly among the shadows; Mazd Gildan’s gaze may yet reward—or condemn—you...</em></p>
  </div>
</div>

<div style="text-align: center;">
  <a href="index.html" class="home-button">Home</a>
</div>

<footer>
  &copy; 2025 Caldwell. Showcasing the wonders of the Evershroud Isles.
</footer>

<!-- Arrow links -->
<div class="arrow-links">
  <a href="temple.html" class="arrow-link left-arrow">←</a>
  <a href="tower.html" class="arrow-link right-arrow">→</a>
</div>

<!-- Modal for help/rules -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal">
    <button class="close-modal" id="close-modal">X</button>
    <h2>Blessing Rules & Invocation</h2>
    <p><strong>Blessing Duration:</strong></p>
    <p><em>Immediate Use:</em> Blessings take effect immediately and last for 24 hours.</p>
    <p><em>Stored Invocation:</em> You can store the blessing for later use (one blessing stored at a time). It must be invoked within 7 days or it fades.</p>
    <p><strong>Invoking a Stored Blessing:</strong></p>
    <p>Requires a brief prayer or focus (one action or short pause). Roleplay the invocation by calling upon the granting god. E.g., “Mazd Gildan, grant me what glimmers in the dark!”</p>
    <p>Remember: One must choose their blessings wisely, as divine favour is powerful but fleeting.</p>
  </div>
</div>

<script>
/* --------------------------------------------
   Blessings Data - Mazd Gildan
   3 random blessings per tier
   -------------------------------------------- */
const blessingsData = {
  "MazdGildan": {
    lesser: [
      "A faint glint of insight grants +2 on your next Appraisal check, or invoke it later in a pinch.",
      "A whisper of avarice bestows advantage on a slight-of-hand attempt, or invoke to conceal a small item.",
      "For one fleeting moment, detect precious metals nearby, or invoke to sense them once."
    ],
    minor: [
      "A rush of cunning grants advantage on a Deception check, or invoke it to bluff your way out of trouble.",
      "A subtle nudge from hidden wealth: gain +1 to your next gold gain roll, or invoke for a small boon in trade.",
      "Momentary greed steels your resolve, letting you reroll a failed Wisdom save, or invoke it during dire negotiations."
    ],
    medium: [
      "Cloaked in cunning, you gain advantage on two Stealth checks, or invoke that stealth when gold is at stake.",
      "Mazd’s mania seizes you, letting you automatically pass a single detection attempt, or invoke it to remain unseen.",
      "A fleeting boon to your bargaining: +3 bonus to a Persuasion check involving wealth, or invoke that silver tongue later."
    ],
    major: [
      "Uncover a hidden stash of coins or valuables once, or invoke to glean the secret location of a small treasure.",
      "Corrupt an enemy’s greed to distract them, or invoke that power to slip by unnoticed in a tense moment.",
      "Harness a wave of desire to briefly enchant an NPC, or invoke it to influence them in a negotiation."
    ],
    greater: [
      "For 24 hours, glean an uncanny sense of hidden valuables, or invoke that sense to zero in on a concealed hoard.",
      "Turn an enemy’s greed upon them, forcing them to hesitate in combat once, or invoke to hamper their next move.",
      "Overwhelm a guard or lesser foe with gold-lust, compelling them to stand aside, or invoke to bribe their will for a moment."
    ],
    miracle: [
      "Summon or reveal a significant hidden fortune once, or invoke it to buy off a dire threat for a short time.",
      "Steal the resolve of an enemy, causing them to falter or flee, or invoke to corrupt a foe’s weapon with tarnish.",
      "Mazd Gildan’s ephemeral hoard appears, paying a considerable debt or providing a small trove of needed goods once."
    ]
  }
};

/* --------------------------------------------
   Utility Functions
   -------------------------------------------- */
function getTier(donation) {
  if (donation < 5) return "lesser";
  if (donation <= 25) return "minor";
  if (donation <= 50) return "medium";
  if (donation <= 100) return "major";
  if (donation <= 250) return "greater";
  return "miracle";
}

function getRandomBlessing(god, tier) {
  const possibleBlessings = blessingsData[god][tier];
  const randomIndex = Math.floor(Math.random() * possibleBlessings.length);
  return possibleBlessings[randomIndex];
}

/* --------------------------------------------
   DOM Elements
   -------------------------------------------- */
const donationInput = document.getElementById("donation-input");
const donateButton = document.getElementById("donate-button");
const blessingResult = document.getElementById("blessing-result");

let selectedGod = "MazdGildan"; // Single deity for catacombs

/* --------------------------------------------
   Event Listeners
   -------------------------------------------- */
donateButton.addEventListener("click", () => {
  const donation = parseInt(donationInput.value) || 0;

  const tier = getTier(donation);
  const blessingText = getRandomBlessing(selectedGod, tier);

  blessingResult.innerHTML = `
    <div>
      <h2>Mazd Gildan grants a <em>${tier}</em> blessing!</h2>
      <p>${blessingText}</p>
    </div>
  `;
});

/* --------------------------------------------
   Modal (Help) Functionality
   -------------------------------------------- */
const helpButton = document.getElementById("help-button");
const modalOverlay = document.getElementById("modal-overlay");
const closeModal = document.getElementById("close-modal");

helpButton.addEventListener("click", () => {
  modalOverlay.style.display = "flex";
});

closeModal.addEventListener("click", () => {
  modalOverlay.style.display = "none";
});
</script>
</body>
</html>
